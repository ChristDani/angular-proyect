<div class="layout">

  <main class="content container py-4"><!-- container y py-4 del mock -->
    <!-- Acciones -->
    <section class="mb-5">
      <h4 class="mb-4 fw-bold">Realiza una transferencia o pago</h4>

      <div class="actions row g-4 justify-content-center">
        <div class="col-12 col-md-4">
          <mat-card class="action-card btn-primary rounded-3 w-100 py-4 d-flex flex-column align-items-center"
                    (click)="doOwnTransfer()">
            <span class="transfer-circle rounded-circle bg-white d-flex align-items-center justify-content-center mb-2">
              <mat-icon class="text-primary">sync_alt</mat-icon>
            </span>
            <div class="fw-semibold">Entre mis cuentas</div>
          </mat-card>
        </div>

        <div class="col-12 col-md-4">
          <mat-card class="action-card btn-primary rounded-3 w-100 py-4 d-flex flex-column align-items-center"
                    (click)="doThirdTransfer()">
            <span class="transfer-circle rounded-circle bg-white d-flex align-items-center justify-content-center mb-2">
              <mat-icon class="text-primary">person_add</mat-icon>
            </span>
            <div class="fw-semibold">A terceros</div>
          </mat-card>
        </div>

        <div class="col-12 col-md-4">
          <mat-card class="action-card btn-primary rounded-3 w-100 py-4 d-flex flex-column align-items-center"
                    (click)="doPayServices()">
            <span class="transfer-circle rounded-circle bg-white d-flex align-items-center justify-content-center mb-2">
              <mat-icon class="text-primary">receipt_long</mat-icon>
            </span>
            <div class="fw-semibold">Pagar servicios</div>
          </mat-card>
        </div>
      </div>
    </section>

    <mat-divider class="my-24"></mat-divider>

    <!-- Historial -->
    <section>
      <h4 class="mb-4 fw-bold">Historial de transacciones</h4>

      <div *ngIf="loading()" class="state soft">Cargando...</div>
      <div *ngIf="!loading() && error()" class="state error">{{ error() }}</div>

      <ng-container *ngIf="!loading() && !error() && transactions().length > 0; else noTxTpl">
        <div class="tx-group" *ngFor="let g of grouped()">
          <h6 class="fw-bold group-title">{{ g[0] }}</h6>

          <mat-card class="tx-item hover-effect mb-2 p-3 d-flex flex-row align-items-center justify-content-between"
                    *ngFor="let t of g[1]">
            <div class="d-flex align-items-center gap-3">
              <span class="transfer-icon rounded-circle bg-primary text-white fw-bold d-flex align-items-center justify-content-center">
                T
              </span>
              <div>
                <span class="fw-semibold">{{ t.type }}</span><br />
                <span class="transfer-date text-muted">{{ t.date | date:'d MMMM' }}</span>
              </div>
            </div>
            <span class="fw-bold" [class.text-danger]="t.amount < 0">
              {{ (t.currency ?? 'PEN') === 'USD' ? '$' : 'S/' }}
              {{ t.amount | number:'1.2-2' }}
            </span>
          </mat-card>
        </div>
      </ng-container>

      <ng-template #noTxTpl>
        <div class="text-center py-5">
          <img src="assets/not-found/not-found-transactions.svg"
               alt="No hay transacciones"
               class="no-transactions-img mb-3" />
          <h5 class="text-muted">No hay transacciones que mostrar</h5>
        </div>
      </ng-template>
    </section>
  </main>
</div>
